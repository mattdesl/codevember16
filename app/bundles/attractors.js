!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=e("./lib/createApp"),i=e("./lib/createAttractor"),o=e("raf-loop"),a=r();a.renderer.setClearColor("hsl(0, 0%, 98%)"),a.renderer.sortObjects=!1,a.renderer.shadowMap.enabled=!0,a.renderer.toneMapping=THREE.CineonToneMapping,a.renderer.gammaInput=!0,a.renderer.gammaOutput=!0,a.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(a.canvas),document.body.style.margin="0",document.body.style.overflow="hidden";var s=i(a);a.scene.add(s.object3d),o(function(e){s.update(e),a.updateControls(),a.render()}).start()},{"./lib/createApp":2,"./lib/createAttractor":3,"raf-loop":38}],2:[function(e,t,n){"use strict";function r(){function e(){w.addPass(new s.RenderPass(y,g));var e=new s.ShaderPass(a);e.material.precision="highp",w.addPass(e),e.uniforms.tDepth.value=w.initialRenderTarget.depthTexture,e.uniforms.cameraNear.value=g.near,e.uniforms.cameraFar.value=g.far,w.addPass(new s.ShaderPass(c())),w.addPass(new f(y,g)),w.passes[w.passes.length-1].renderToScreen=!0}function t(){var e=_.width/_.height;T.update(),g.position.fromArray(T.position),g.up.fromArray(T.up),E.fromArray(T.direction).add(g.position),g.lookAt(E),g.aspect=e,g.updateProjectionMatrix()}function n(){w.passes.length>=2?w.render():h.render(y,g)}function r(){var e=h.getPixelRatio(),n=window.innerWidth,r=window.innerHeight,i=!0;if(i){var o=720,a=o/1.6;n>o&&(n=Math.min(o,n)),r>a&&(r=Math.min(a,r))}v.style.left=Math.floor((window.innerWidth-n)/2)+"px",v.style.top=Math.floor((window.innerHeight-r)/2)+"px",v.style.position="absolute",_.width=n,_.height=r,h.setSize(n,r),w.passes.forEach(function(t){t.uniforms&&t.uniforms.resolution&&t.uniforms.resolution.value.set(n*e,r*e)}),x.forEach(function(t){t.setSize(n*e,r*e)}),t()}function u(){var e=function(){var e=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight);return e.texture.minFilter=THREE.NearestFilter,e.texture.magFilter=THREE.NearestFilter,e.texture.generateMipmaps=!1,e.texture.format=THREE.RGBFormat,e},t=e(),n=e(),r=e();return r.depthTexture=new THREE.DepthTexture,new s(h,t,n,r)}var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=Math.min(2,window.devicePixelRatio),h=new THREE.WebGLRenderer(o({antialias:!1},l));h.setPixelRatio(d);var v=h.domElement,p=.1,m=100,b=65,g=new THREE.PerspectiveCamera(b,1,p,m),E=new THREE.Vector3,w=u(),x=[w.renderTarget1,w.renderTarget2,w.initialRenderTarget],y=new THREE.Scene,T=i(o({canvas:v,distanceBounds:[1,10],distance:4,target:[0,2,0],phi:90*Math.PI/180,theta:90*Math.PI/180},l));window.addEventListener("resize",r),e();var _=o({},{updateControls:t,camera:g,scene:y,renderer:h,controls:T,canvas:v,render:n});return _.width=0,_.height=0,r(),t(),_}var i=e("orbit-controls"),o=e("object-assign"),a=e("./shaders/SSAOShader"),s=e("./post/EffectComposer"),c=e("three-shader-fxaa"),f=e("./post/BloomPass");t.exports=r},{"./post/BloomPass":5,"./post/EffectComposer":6,"./shaders/SSAOShader":7,"object-assign":30,"orbit-controls":31,"three-shader-fxaa":46}],3:[function(e,t,n){"use strict";var r=e("./getShadowPlane"),i=e("nice-color-palettes");t.exports=function(e){function t(e){c+=e/1e3;var t=4,n=.025,r=Math.cos(c*n)*t,i=Math.sin(c*n)*t;l.position.set(r,5,i),f.forEach(function(e,t){e.rotation.z+=.00185})}function n(t){var n=new THREE.MeshStandardMaterial({map:null,metalness:0,roughness:1,color:"hsl(150, 60%, 95%)",side:THREE.DoubleSide,vertexColors:THREE.NoColors,shading:THREE.FlatShading}),r=o("assets/textures/pisaRGBM16/",".png");(new THREE.CubeTextureLoader).load(r,function(r){r.encoding=THREE.RGBM16Encoding;var i=new THREE.PMREMGenerator(r);i.update(e.renderer);var o=new THREE.PMREMCubeUVPacker(i.cubeLods);o.update(e.renderer);var a=o.CubeUVRenderTarget;n.envMap=a.texture,n.needsUpdate=!0,t(n)})}function o(e,t){return[e+"px"+t,e+"nx"+t,e+"py"+t,e+"ny"+t,e+"pz"+t,e+"nz"+t]}function a(){u.add(l),u.add(new THREE.AmbientLight("hsl(0, 0%, 5%)")),n(function(e){var t=r();t.scale.multiplyScalar(3e3),u.add(t);var n=i[0];s(e,.1,0,0,8,1/3,35,n[0]),s(e,.1,0,0,10,.5,30,n[1]),s(e,.1,0,0,2,3/8,30,n[2])})}function s(e,t,n,r,i,o,a,s){for(var c=.01,l=2e3,d=[],h=0;h<l;h++){var v=t+c*i*(n-t),p=n+c*(a*t-n-t*r),m=r+c*(t*n-o*r);t=v,n=p,r=m,d[h]=new THREE.Vector3(t,n,r)}var b=new THREE.CatmullRomCurve3(d),g=new THREE.TubeGeometry(b,Math.floor(d.length/2),1.5,4,b.closed);e=e.clone(),e.bumpMap=(new THREE.TextureLoader).load("assets/textures/tex.jpg"),e.bumpMap.wrapS=e.bumpMap.wrapT=THREE.RepeatWrapping,e.bumpMap.repeat.set(.5,.5),e.bumpScale=.015,e.color.setStyle(s),e.needsUpdate=!0;var E=new THREE.Mesh(g,e);E.receiveShadow=!0,E.castShadow=!0,E.scale.multiplyScalar(.05),E.position.y=2.25,E.position.z=-2,u.add(E),f.push(E)}var c=0,f=[],u=new THREE.Object3D,l=new THREE.DirectionalLight(16777215,.5);return l.castShadow=!0,l.shadow.mapSize.set(2048,2048),l.shadow.camera.left=-3,l.shadow.camera.right=3,l.shadow.camera.top=5,l.shadow.camera.bottom=-5,l.shadow.camera.near=1,l.shadow.camera.far=100,l.shadow.radius=1,a(),{object3d:u,update:t}}},{"./getShadowPlane":4,"nice-color-palettes":29}],4:[function(e,t,n){"use strict";var r=e("glslify"),i=r(["#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n  varying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n\n  #include <beginnormal_vertex>\n  #include <morphnormal_vertex>\n  #include <skinbase_vertex>\n  #include <skinnormal_vertex>\n  #include <defaultnormal_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n  #include <clipping_planes_vertex>\n\n  #include <worldpos_vertex>\n  #include <envmap_vertex>\n  #include <lights_lambert_vertex>\n  #include <shadowmap_vertex>\n\n}\n"]),o=r(["#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n  varying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n  // gl_FragColor = vec4(vec3(1.0), 1.0);\n  // gl_FragColor = vec4(vec3(0.5) * (getShadowMask()), 1.0);\n  // gl_FragColor = vec4(mix(vec3(1.0), vec3(getShadowMask()), opacity), 1.0);\n  gl_FragColor = vec4(vec3(0.0), (1.0 - getShadowMask()) * opacity);\n}\n"]);t.exports=function(){var e=new THREE.PlaneGeometry(1,1,1);e.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var t=new THREE.ShaderMaterial({vertexShader:i,fragmentShader:o,lights:!0,uniforms:THREE.UniformsUtils.clone(THREE.ShaderLib.lambert.uniforms),side:THREE.FrontSide,transparent:!0,depthWrite:!1});t.uniforms.opacity.value=.15;var n=new THREE.Mesh(e,t);return n.receiveShadow=!0,n}},{glslify:25}],5:[function(e,t,n){"use strict";function r(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scene=e,this.camera=t,this.debugCopyShader=new THREE.ShaderMaterial(a),this._lastWidth=null,this._lastHeight=null,this._blurTarget=null,this._thresholdTarget=null,this.enabled=!0,this.needsSwap=!0,this.oldColor=new THREE.Color,this.oldAlpha=1,this.clearColor=new THREE.Color("#fff"),this.clearAlpha=0,this.postShader=new THREE.RawShaderMaterial({vertexShader:i(["#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * position;\n}\n"]),fragmentShader:i(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\nuniform vec2 resolution;\n\nvec3 tex(vec2 uv);\n\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n#ifndef TAU\n  #define TAU 6.28318530718\n#endif\n\n//Use last part of hash function to generate new random radius and angle\nvec2 mult(inout vec2 r) {\n  r = fract(r * vec2(12.9898,78.233));\n  return sqrt(r.x + .001) * vec2(sin(r.y * TAU), cos(r.y * TAU));\n}\n\nvec3 blur(vec2 uv, float radius, float aspect, float offset) {\n  vec2 circle = vec2(radius);\n  circle.x *= aspect;\n  vec2 rnd = vec2(random(vec2(uv + offset)));\n\n  vec3 acc = vec3(0.0);\n  for (int i = 0; i < 10; i++) {\n    acc += tex(uv + circle * mult(rnd)).xyz;\n  }\n  return acc / float(10);\n}\n\nvec3 blur(vec2 uv, float radius, float aspect) {\n  return blur(uv, radius, aspect, 0.0);\n}\n\nvec3 blur(vec2 uv, float radius) {\n  return blur(uv, radius, 1.0);\n}\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nfloat luma(vec4 color) {\n  return dot(color.rgb, vec3(0.299, 0.587, 0.114));\n}\n\nvec3 tex(vec2 uv) {\n  vec3 rgb = texture2D(tDiffuse, uv).rgb;\n  // float threshold = luma(rgb);\n  return rgb;\n  // return threshold > 0.2 ? rgb : vec3(0.0);\n  // return step(1.0 - t, rgb);\n  // return smoothstep(vec3(0.0), vec3(, threshold);\n}\n\nvoid main () {\n  float aspect = resolution.x / resolution.y;\n  \n  //jitter the noise but not every frame\n  float tick = 0.0;//floor(fract(iGlobalTime)*20.0);\n  float jitter = mod(tick * 382.0231, 21.321);\n  \n  // vec3 blurred = vec3(0.0);\n  // blurred += 0.6 * blur(vUv, 0.3, 1.0 / aspect, jitter);\n  \n  vec3 blurred = blur(vUv, 0.25, 1.0 / aspect);\n  gl_FragColor.rgb = blurred;\n  gl_FragColor.a = 1.0;\n  // gl_FragColor = texture2D(tDiffuse, vUv);\n}"]),uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1,1)}}}),this.postShader.name="bloom-blur-material",this.combineShader=new THREE.RawShaderMaterial({vertexShader:i(["#define GLSLIFY 1\nattribute vec4 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * position;\n}\n"]),fragmentShader:i(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nuniform sampler2D tDiffuse;\nuniform sampler2D tBloomDiffuse;\nuniform vec2 resolution;\n\nvoid main () {\n  vec4 blurred = texture2D(tBloomDiffuse, vUv);\n  blurred.rgb *= 0.15;\n  gl_FragColor = texture2D(tDiffuse, vUv) + blurred;\n}"]),uniforms:{resolution:{type:"v2",value:new THREE.Vector2},tDiffuse:{type:"t",value:null},tBloomDiffuse:{type:"t",value:null}}}),this.combineShader.name="bloom-combine-material",this.postCamera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this.postScene=new THREE.Scene,this.postQuad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2)),this.postQuad.name="godray-post-quad",this.postScene.add(this.postQuad),this.renderToScreen=!1}var i=e("glslify"),o=(e("path"),e("clamp")),a=e("three-copyshader"),s=3,c=2048;t.exports=r,r.prototype={_updateTargets:function(e){var t=e.width,n=e.height,r=o(Math.floor(t/s),2,c),i=o(Math.floor(n/s),2,c);this._thresholdTarget&&this._blurTarget?this._thresholdTarget.width===t&&this._thresholdTarget.height===n||(this._thresholdTarget.setSize(r,i),this._blurTarget.setSize(r,i)):(this._blurTarget=new THREE.WebGLRenderTarget(r,i),this._blurTarget.texture.minFilter=THREE.LinearFilter,this._blurTarget.texture.magFilter=THREE.LinearFilter,this._blurTarget.texture.generateMipmaps=!1,this._blurTarget.depthBuffer=!0,this._blurTarget.stencilBuffer=!1,this._thresholdTarget=this._blurTarget.clone())},render:function(e,t,n,r){this._updateTargets(n);var i=this.renderToScreen?void 0:t;this.oldColor.copy(e.getClearColor()),this.oldAlpha=e.getClearAlpha();var o=e.autoClear;e.setClearColor(this.clearColor,this.clearAlpha),e.autoClear=!1,e.clearTarget(this._thresholdTarget,!0,!0,!1),e.render(this.scene,this.camera,this._thresholdTarget,!1),this.postScene.overrideMaterial=this.postShader,this.postShader.uniforms.resolution.value.set(this._thresholdTarget.width,this._thresholdTarget.height),this.postShader.uniforms.tDiffuse.value=this._thresholdTarget.texture,e.render(this.postScene,this.postCamera,this._blurTarget,!0),this.postScene.overrideMaterial=this.combineShader,this.combineShader.uniforms.tDiffuse.value=n.texture,this.combineShader.uniforms.tBloomDiffuse.value=this._blurTarget.texture;var a=e.getPixelRatio();this.combineShader.uniforms.resolution.value.set(i?i.width:window.innerWidth*a,i?i.height:window.innerHeight*a),e.render(this.postScene,this.postCamera,i,!0),e.setClearColor(this.oldColor,this.oldAlpha),e.autoClear=o}}},{clamp:8,glslify:25,path:34,"three-copyshader":41}],6:[function(e,t,n){"use strict";function r(e,t,n,r){if(this.renderer=e,void 0===t)throw new Error("must specify targets");this.renderTarget1=t,this.renderTarget2=n,this.initialRenderTarget=r,this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],this.copyPass=new o(i)}t.exports=r;var i=r.CopyShader=e("three-copyshader"),o=(r.RenderPass=e("three-effectcomposer/lib/renderpass")(THREE),r.ShaderPass=e("three-effectcomposer/lib/shaderpass")(THREE,r)),a=r.MaskPass=e("three-effectcomposer/lib/maskpass")(THREE),s=r.ClearMaskPass=e("three-effectcomposer/lib/clearmaskpass")(THREE);r.prototype={swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e)},clearPasses:function(){this.passes.length=0},insertPass:function(e,t){this.passes.splice(t,0,e),this.initialClearColor=new THREE.Color(1,0,0)},render:function(e){this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2;var t,n,r,i=!1,o=this.passes.length;for(n=0,r=0;n<o;n++)if(t=this.passes[n],t.enabled){var c,f;r<=1?(f=this.writeBuffer,c=this.initialRenderTarget):(f=this.writeBuffer,c=this.readBuffer);var u;u=this.depthTexture?this.depthTexture:0===r?void 0:this.initialRenderTarget.depthTexture;var l=this.initialRenderTarget.attachments;if(t.render(this.renderer,f,c,e,i,u,l),t.needsSwap){if(i){var d=this.renderer.context;d.stencilFunc(d.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),d.stencilFunc(d.EQUAL,1,4294967295)}this.swapBuffers()}t instanceof a?i=!0:t instanceof s&&(i=!1),r++}},reset:function(e){void 0===e&&(e=this.renderTarget1.clone(),e.width=window.innerWidth,e.height=window.innerHeight),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){var n=this.renderTarget1.clone();n.width=e,n.height=t,this.reset(n)}},r.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1),r.quad=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),null),r.scene=new THREE.Scene,r.scene.add(r.quad)},{"three-copyshader":41,"three-effectcomposer/lib/clearmaskpass":42,"three-effectcomposer/lib/maskpass":43,"three-effectcomposer/lib/renderpass":44,"three-effectcomposer/lib/shaderpass":45}],7:[function(e,t,n){"use strict";t.exports={uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},onlyAO:{type:"i",value:0},aoClamp:{type:"f",value:.75},lumInfluence:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","uniform bool onlyAO;","uniform vec2 resolution;","uniform float aoClamp;","uniform float lumInfluence;","uniform sampler2D tDiffuse;","uniform highp sampler2D tDepth;","varying vec2 vUv;","#define DL 2.399963229728653","#define EULER 2.718281828459045","const int samples = 4;","const float radius = 5.0;","const bool useNoise = false;","const float noiseAmount = 0.0003;","const float diffArea = 0.4;","const float gDisplace = 0.4;","highp vec2 rand( const vec2 coord ) {","highp vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 12.9898, 78.233 ) );","float ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );","noise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","highp float ff = fract( 1.0 - coord.s * ( resolution.x / 2.0 ) );","highp float gg = fract( coord.t * ( resolution.y / 2.0 ) );","noise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float readDepth( const in vec2 coord ) {","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","return cameraCoef / ( cameraFarPlusNear - texture2D( tDepth, coord ).x * cameraFarMinusNear );","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 2.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * dd * dd / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh ) {","float dd = radius - depth * radius;","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + dd * vv;","vec2 coord2 = vUv - dd * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1 ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2 ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","void main() {","highp vec2 noise = rand( vUv );","float depth = readDepth( vUv );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / resolution.x )  / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / resolution.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float ao = 0.0;","float dz = 1.0 / float( samples );","float z = 1.0 - dz / 2.0;","float l = 0.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","float pw = cos( l ) * r;","float ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","vec3 color = texture2D( tDiffuse, vUv ).rgb;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","if ( onlyAO ) {","final = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","}","gl_FragColor = vec4( final, 1.0 );","}"].join("\n")}},{}],8:[function(e,t,n){function r(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}t.exports=r},{}],9:[function(e,t,n){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],10:[function(e,t,n){function r(e,t){return{configurable:!0,enumerable:!0,get:e,set:t}}t.exports=r},{}],11:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,c,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),f=n.slice(),r=f.length,c=0;c<r;c++)f[c].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],12:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}t.exports=r},{}],13:[function(e,t,n){t.exports=e("gl-vec4/normalize")},{"gl-vec4/normalize":24}],14:[function(e,t,n){function r(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}t.exports=r},{}],15:[function(e,t,n){function r(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}t.exports=r},{}],16:[function(e,t,n){function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}t.exports=r},{}],17:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],c=n[2];return e[0]=i*c-o*s,e[1]=o*a-r*c,e[2]=r*s-i*a,e}t.exports=r},{}],18:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],19:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],20:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}t.exports=r},{}],21:[function(e,t,n){function r(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}t.exports=r},{}],22:[function(e,t,n){function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}t.exports=r},{}],23:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],c=n[2],f=n[3],u=f*r+s*o-c*i,l=f*i+c*r-a*o,d=f*o+a*i-s*r,h=-a*r-s*i-c*o;return e[0]=u*f+h*-a+l*-c-d*-s,e[1]=l*f+h*-s+d*-a-u*-c,e[2]=d*f+h*-c+u*-s-l*-a,e}t.exports=r},{}],24:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a),e}t.exports=r},{}],25:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],26:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],27:[function(e,t,n){function r(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,o=e.clientY||0,a=i(t);return n[0]=r-a.left,n[1]=o-a.top,n}function i(e){return e===window||e===document||e===document.body?o:e.getBoundingClientRect()}var o={left:0,top:0};t.exports=r},{}],28:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=i("ex",e),o=function(e){n&&e.preventDefault();var i=e.deltaX||0,o=e.deltaY||0,a=e.deltaZ||0,s=e.deltaMode,c=1;switch(s){case 1:c=r;break;case 2:c=window.innerHeight}if(i*=c,o*=c,a*=c,i||o||a)return t(i,o,a,e)};return e.addEventListener("wheel",o),o}var i=e("to-px");t.exports=r},{"to-px":47}],29:[function(e,t,n){t.exports=[["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#ff9900","#424242","#e9e9e9","#bcbcbc","#3299bb"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#300030","#480048","#601848","#c04848","#f07241"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#515151","#ffffff","#00b4ff","#eeeeee"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#1b325f","#9cc4e4","#e9f2f9","#3a89c9","#f26c4f"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#f6f6f6","#e8e8e8","#333333","#990100","#b90504"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#c2412d","#d1aa34","#a7a844","#a46583","#5a1e4a"],["#046d8b","#309292","#2fb8ac","#93a42a","#ecbe13"],["#f8edd1","#d88a8a","#474843","#9d9d93","#c5cfc6"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#ffefd3","#fffee4","#d0ecea","#9fd6d2","#8b7a5e"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#75616b","#bfcff7","#dce4f7","#f8f3bf","#d34017"],["#a1dbb2","#fee5ad","#faca66","#f7a541","#f45d4c"],["#ff003c","#ff8a00","#fabe28","#88c100","#00c176"]]},{}],30:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function i(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(e,t){
for(var n,i,s=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var f in n)o.call(n,f)&&(s[f]=n[f]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(n);for(var u=0;u<i.length;u++)a.call(n,i[u])&&(s[i[u]]=n[i[u]])}}return s}},{}],31:[function(e,t,n){function r(e){function t(e,t){var n=2*Math.PI;b[0]-=n*e*x.rotateSpeed,b[1]-=n*t*x.rotateSpeed}function n(e){b[2]+=e*x.zoomSpeed}function r(e){b[2]-=e*x.pinchSpeed}function v(){var e=x.up||l;c(E,e,l),f(w,E);var t=x.distance;u.subtract(g,x.position,x.target),u.transformQuat(g,g,E);var n=Math.atan2(g[0],g[2]),r=Math.atan2(Math.sqrt(g[0]*g[0]+g[2]*g[2]),g[1]);n+=b[0],r+=b[1],n=a(n,x.thetaBounds[0],x.thetaBounds[1]),r=a(r,x.phiBounds[0],x.phiBounds[1]),r=a(r,d,Math.PI-d),t+=b[2],t=a(t,x.distanceBounds[0],x.distanceBounds[1]);var o=Math.abs(t)<=d?d:t;g[0]=o*Math.sin(r)*Math.sin(n),g[1]=o*Math.cos(r),g[2]=o*Math.sin(r)*Math.cos(n),x.phi=r,x.theta=n,x.distance=t,u.transformQuat(g,g,w),u.add(x.position,x.target,g),i(x.direction,e,x.position,x.target);for(var s="number"==typeof x.damping?x.damping:1,h=0;h<b.length;h++)b[h]*=1-s}function p(e,t,n){e&&u.copy(e,x.position),t&&u.copy(t,x.direction),n&&u.copy(n,x.up)}function m(){var e=Math.max(d,x.distance);x.position[0]=e*Math.sin(x.phi)*Math.sin(x.theta),x.position[1]=e*Math.cos(x.phi),x.position[2]=e*Math.sin(x.phi)*Math.cos(x.theta),u.add(x.position,x.position,x.target)}e=e||{};var b=[0,0,0],g=[0,0,0],E=[0,0,0,1],w=E.slice(),x={update:v,copyInto:p,position:e.position?e.position.slice():[0,0,1],direction:[0,0,-1],up:e.up?e.up.slice():[0,1,0],target:e.target?e.target.slice():[0,0,0],phi:o(e.phi,Math.PI/2),theta:e.theta||0,distance:o(e.distance,1),damping:o(e.damping,.25),rotateSpeed:o(e.rotateSpeed,.28),zoomSpeed:o(e.zoomSpeed,.0075),pinchSpeed:o(e.pinchSpeed,.0075),pinch:e.pinching!==!1,zoom:e.zoom!==!1,rotate:e.rotate!==!1,phiBounds:e.phiBounds||[0,Math.PI],thetaBounds:e.thetaBounds||[-(1/0),1/0],distanceBounds:e.distanceBounds||[0,1/0]};"number"!=typeof e.distance&&(u.subtract(h,x.position,x.target),x.distance=u.length(h)),m();const y=s({parent:e.parent||window,element:e.element,rotate:e.rotate!==!1?t:null,zoom:e.zoom!==!1?n:null,pinch:e.pinch!==!1?r:null});return x.enable=y.enable,x.disable=y.disable,x}function i(e,t,n,r){u.copy(e,r),u.subtract(e,e,n),u.normalize(e,e)}var o=e("defined"),a=e("clamp"),s=e("./lib/input"),c=e("quat-from-unit-vec3"),f=e("gl-quat/invert"),u={length:e("gl-vec3/length"),add:e("gl-vec3/add"),subtract:e("gl-vec3/subtract"),transformQuat:e("gl-vec3/transformQuat"),copy:e("gl-vec3/copy"),normalize:e("gl-vec3/normalize"),cross:e("gl-vec3/cross")},l=[0,1,0],d=Math.pow(2,-23),h=[0,0,0];t.exports=r},{"./lib/input":32,clamp:8,defined:9,"gl-quat/invert":12,"gl-vec3/add":15,"gl-vec3/copy":16,"gl-vec3/cross":17,"gl-vec3/length":19,"gl-vec3/normalize":20,"gl-vec3/subtract":22,"gl-vec3/transformQuat":23,"quat-from-unit-vec3":37}],32:[function(e,t,n){function r(e){function t(){C||(C=!0,S&&(g=i(E,function(e,t){S(t)},!0)),R&&(w.addEventListener("mousedown",d,!1),w.addEventListener("mousemove",v,!1),w.addEventListener("mouseup",h,!1)),(R||M)&&(b=a(E),E.addEventListener("touchstart",r,!1),R&&(E.addEventListener("touchmove",s,!1),b.on("place",c),b.on("lift",f)),M&&b.on("change",l)))}function n(){C&&(C=!1,g&&E.removeEventListener("wheel",g),b&&(b.disable(),E.removeEventListener("touchstart",r,!1),R&&E.removeEventListener("touchmove",s,!1)),R&&(w.removeEventListener("mousedown",d,!1),w.removeEventListener("mousemove",v,!1),w.removeEventListener("mouseup",h,!1)))}function r(e){e.preventDefault()}function s(e){if(y&&!u())for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],r=b.indexOfTouch(n),i=M?r!==-1:0===r;if(i){v(n);break}}}function c(e,t){if(y=!u()){var n=t||e;d(n)}}function f(e,t){y=!u(),y&&t&&o(t,E,x)}function u(){return b.pinching&&M}function l(e,t){M(e-t)}function d(e){o(e,E,x),p(x)&&(y=!0)}function h(){y=!1}function v(e){var t=o(e,E,T);if(b&&u())return void(x=t);if(y){var n=m(_),r=(t[0]-x[0])/n[0],i=(t[1]-x[1])/n[1];R(r,i),x[0]=t[0],x[1]=t[1]}}function p(e){if(E===window||E===document||E===document.body)return!0;var t=E.getBoundingClientRect();return e[0]>=0&&e[1]>=0&&e[0]<t.width&&e[1]<t.height}function m(e){var t=E;return t!==window&&t!==document&&t!==document.body||(t=document.documentElement),e[0]=t.clientWidth,e[1]=t.clientHeight,e}var b,g,E=e.element||window,w=e.parent||E,x=[0,0],y=!1,T=[0,0],_=[0,0],S=e.zoom,R=e.rotate,M=e.pinch,C=!1;return t(),{enable:t,disable:n}}var i=e("mouse-wheel"),o=e("mouse-event-offset"),a=e("touch-pinch");t.exports=r},{"mouse-event-offset":27,"mouse-wheel":28,"touch-pinch":48}],33:[function(e,t,n){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],34:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===a(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}for(var f=[],c=s;c<i.length;c++)f.push("..");return f=f.concat(o.slice(s)),f.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:36}],35:[function(e,t,n){(function(e){(function(){var n,r,i;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-i)/1e6},r=e.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},i=n()):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,e("_process"))},{_process:36}],36:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){m&&v&&(m=!1,v.length?p=v.concat(p):b=-1,p.length&&c())}function c(){if(!m){var e=o(s);m=!0;for(var t=p.length;t;){for(v=p,p=[];++b<t;)v&&v[b].run();b=-1,t=p.length}v=null,m=!1,a(e)}}function f(e,t){this.fun=e,this.array=t}function u(){}var l,d,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var v,p=[],m=!1,b=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new f(e,t)),1!==p.length||m||o(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],37:[function(e,t,n){function r(e,t,n){var r=i(t,n)+1;return r<f?(r=0,Math.abs(t[0])>Math.abs(t[2])?o(c,-t[1],t[0],0):o(c,0,-t[2],t[1])):s(c,t,n),e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=r,a(e,e),e}var i=e("gl-vec3/dot"),o=e("gl-vec3/set"),a=e("gl-quat/normalize"),s=e("gl-vec3/cross"),c=[0,0,0],f=1e-6;t.exports=r},{"gl-quat/normalize":13,"gl-vec3/cross":17,"gl-vec3/dot":18,"gl-vec3/set":21}],38:[function(e,t,n){function r(e){return this instanceof r?(this.running=!1,this.last=a(),this._frame=0,this._tick=this.tick.bind(this),void(e&&this.on("tick",e))):new r(e)}var i=e("inherits"),o=e("events").EventEmitter,a=e("right-now"),s=e("raf");t.exports=r,i(r,o),r.prototype.start=function(){if(!this.running)return this.running=!0,this.last=a(),this._frame=s(this._tick),this},r.prototype.stop=function(){return this.running=!1,0!==this._frame&&s.cancel(this._frame),this._frame=0,this},r.prototype.tick=function(){this._frame=s(this._tick);var e=a(),t=e-this.last;this.emit("tick",t),this.last=e}},{events:11,inherits:26,raf:39,"right-now":40}],39:[function(e,t,n){(function(n){for(var r=e("performance-now"),i="undefined"==typeof window?n:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],c=i["cancel"+a]||i["cancelRequest"+a],f=0;!s&&f<o.length;f++)s=i[o[f]+"Request"+a],c=i[o[f]+"Cancel"+a]||i[o[f]+"CancelRequest"+a];if(!s||!c){var u=0,l=0,d=[],h=1e3/60;s=function(e){if(0===d.length){var t=r(),n=Math.max(0,h-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++l,callback:e,cancelled:!1}),l},c=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}t.exports=function(e){return s.call(i,e)},t.exports.cancel=function(){c.apply(i,arguments)},t.exports.polyfill=function(){i.requestAnimationFrame=s,i.cancelAnimationFrame=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":35}],40:[function(e,t,n){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],41:[function(e,t,n){t.exports={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},{}],42:[function(e,t,n){t.exports=function(e){function t(){return this instanceof t?void(this.enabled=!0):new t(scene,camera)}return t.prototype={render:function(e,t,n,r){var i=e.context;i.disable(i.STENCIL_TEST)}},t}},{}],43:[function(e,t,n){t.exports=function(e){function t(e,n){return this instanceof t?(this.scene=e,this.camera=n,this.enabled=!0,this.clear=!0,this.needsSwap=!1,void(this.inverse=!1)):new t(e,n)}return t.prototype={render:function(e,t,n,r){var i=e.context;i.colorMask(!1,!1,!1,!1),i.depthMask(!1);var o,a;this.inverse?(o=0,a=1):(o=1,a=0),i.enable(i.STENCIL_TEST),i.stencilOp(i.REPLACE,i.REPLACE,i.REPLACE),i.stencilFunc(i.ALWAYS,o,4294967295),i.clearStencil(a),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),i.colorMask(!0,!0,!0,!0),i.depthMask(!0),i.stencilFunc(i.EQUAL,1,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},t}},{}],44:[function(e,t,n){t.exports=function(e){function t(n,r,i,o,a){return this instanceof t?(this.scene=n,this.camera=r,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=void 0!==a?a:1,this.oldClearColor=new e.Color,this.oldClearAlpha=1,this.enabled=!0,this.clear=!0,void(this.needsSwap=!1)):new t(n,r,i,o,a)}return t.prototype={render:function(e,t,n,r){this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,n,this.clear),this.clearColor&&e.setClearColor(this.oldClearColor,this.oldClearAlpha),this.scene.overrideMaterial=null}},t}},{}],45:[function(e,t,n){t.exports=function(e,t){function n(t,r){return this instanceof n?(this.textureID=void 0!==r?r:"tDiffuse",this.uniforms=e.UniformsUtils.clone(t.uniforms),this.material=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderToScreen=!1,this.enabled=!0,this.needsSwap=!0,void(this.clear=!1)):new n(t,r)}return n.prototype={render:function(e,n,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r),t.quad.material=this.material,this.renderToScreen?e.render(t.scene,t.camera):e.render(t.scene,t.camera,n,this.clear)}},n}},{}],46:[function(e,t,n){(function(e){function n(t){if("undefined"==typeof e.THREE)throw new TypeError("You must have THREE in global scope for this module.");return t=t||{},{uniforms:{tDiffuse:{type:"t",value:new THREE.Texture},resolution:{type:"v2",value:t.resolution||new THREE.Vector2}},vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec2 resolution;\n\nvoid main() {\n  vUv = uv;\n  vec2 fragCoord = uv * resolution;\n  vec2 inverseVP = 1.0 / resolution.xy;\n  v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n  v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n  v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n  v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n  v_rgbM = vec2(fragCoord * inverseVP);\n\n  gl_Position = projectionMatrix *\n              modelViewMatrix *\n              vec4(position,1.0);\n}\n",fragmentShader:'#define GLSLIFY 1\nvarying vec2 vUv;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n//make sure to have a resolution uniform set to the screen size\nuniform vec2 resolution;\nuniform sampler2D tDiffuse;\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent \n//texture reads can be a bottleneck\nvec4 fxaa_1540259130(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE, \n            vec2 v_rgbSW, vec2 v_rgbSE, \n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n  vec2 fragCoord = vUv * resolution;   \n  gl_FragColor = fxaa_1540259130(tDiffuse, fragCoord, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n'}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(e,t,n){"use strict";function r(e,t){var n=a(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function i(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var i=r(n,"font-size")/128;return t.removeChild(n),i}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return i(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}var a=e("parse-unit");t.exports=o;var s=96},{"parse-unit":33}],48:[function(e,t,n){function r(e){function t(e){for(var t=e.identifier,n=0;n<v.length;n++)if(v[n]&&v[n].touch&&v[n].touch.identifier===t)return n;return-1}function n(){g||(g=!0,e.addEventListener("touchstart",f,!1),e.addEventListener("touchmove",u,!1),e.addEventListener("touchend",l,!1),e.addEventListener("touchcancel",l,!1))}function r(){g&&(g=!1,e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",u,!1),e.removeEventListener("touchend",l,!1),e.removeEventListener("touchcancel",l,!1))}function f(n){for(var r=0;r<n.changedTouches.length;r++){var o=n.changedTouches[r],a=o.identifier,s=t(a);if(s===-1&&p<2){var f=0===p,u=v[0]?1:0,l=v[0]?0:1,g=new i;v[u]=g,p++,g.touch=o,c(o,e,g.position);var E=v[l]?v[l].touch:void 0;if(h.emit("place",o,E),!f){var w=d();b=!1,h.emit("start",w),m=w}}}}function u(n){for(var r=!1,i=0;i<n.changedTouches.length;i++){var o=n.changedTouches[i],a=t(o);a!==-1&&(r=!0,v[a].touch=o,c(o,e,v[a].position))}if(2===p&&r){var s=d();h.emit("change",s,m),m=s}}function l(e){for(var n=0;n<e.changedTouches.length;n++){var r=e.changedTouches[n],i=t(r);if(i!==-1){v[i]=null,p--;var o=0===i?1:0,a=v[o]?v[o].touch:void 0;h.emit("lift",r,a)}}b||2===p||(b=!0,h.emit("end"))}function d(){return p<2?0:o(v[0].position,v[1].position)}e=e||window;var h=new a,v=[null,null],p=0,m=0,b=!1,g=!1;return Object.defineProperties(h,{pinching:s(function(){return 2===p}),fingers:s(function(){return v})}),n(),h.enable=n,h.disable=r,h.indexOfTouch=t,h}function i(){this.position=[0,0],this.touch=null}var o=e("gl-vec2/distance"),a=e("events").EventEmitter,s=e("dprop"),c=e("mouse-event-offset");t.exports=r},{dprop:10,events:11,"gl-vec2/distance":14,"mouse-event-offset":27}]},{},[1]);
